<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Checkout - Quantum SMM (Learning)</title>
    <meta name="description" content="Complete your Quantum SMM order. Review service, provide details, and confirm payment (Learning Purpose Only).">
     <meta name="robots" content="noindex, nofollow"> <!-- Prevent indexing -->

    <!-- Favicon, Fonts, Icons -->
    <link rel="icon" href="data:image/svg+xml,...">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700;800&family=Roboto+Mono:wght@400;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css" integrity="sha512-DTOQO9RWCH3ppGqcWaEA1BIZOC6xxalwEsw9c2QQeAIftl+Vegovlnee1c9QX4TctnWMn13TZye+giMm8e2LwA==" crossorigin="anonymous" referrerpolicy="no-referrer" />

    <style>
       :root {
            --bg-dark-primary: #080d14;
            --bg-dark-secondary: #101522;
            --bg-dark-tertiary: #1a202c;
            --accent-cyan: #00e5ff;
            --accent-purple: #b367ff;
            --accent-indigo: #7076ff;
            --accent-green: #14f195;
            --accent-pink: #ff55a5;
            --accent-gold: #ffc85a; /* New Accent */
            --text-light: #f0f4f8;
            --text-medium: #a0aec0;
            --text-dark: var(--bg-dark-primary);
            --border-color: rgba(55, 65, 81, 0.5);
            --border-accent: rgba(0, 229, 255, 0.4);
            --glow-cyan: 0 0 18px rgba(0, 229, 255, 0.45), 0 0 6px rgba(0, 229, 255, 0.7);
            --glow-purple: 0 0 18px rgba(179, 103, 255, 0.45), 0 0 6px rgba(179, 103, 255, 0.7);
            --gradient-tech: linear-gradient(135deg, var(--accent-cyan), var(--accent-purple));
            --gradient-button: linear-gradient(90deg, var(--accent-indigo), var(--accent-purple));
            --gradient-dark-card: linear-gradient(145deg, rgba(17, 21, 34, 0.75), rgba(26, 32, 44, 0.9)); /* Slightly darker */
            --gradient-support: linear-gradient(45deg, var(--accent-cyan), var(--accent-pink));

            --shadow-glow-sm: 0 0 10px rgba(0, 229, 255, 0.25);
            --shadow-glow-md: 0 0 18px rgba(179, 103, 255, 0.3);
            --shadow-glow-lg: 0 0 30px rgba(112, 118, 255, 0.35);
            --shadow-dark-soft: 0 8px 25px rgba(0, 0, 0, 0.3);

            --border-radius: 12px;
            --transition-speed: 0.35s;
            --transition-bounce: cubic-bezier(0.34, 1.56, 0.64, 1);
            --transition-smooth: cubic-bezier(0.25, 0.8, 0.25, 1);
        }
        
        * { margin: 0; padding: 0; box-sizing: border-box; }
        
        html { scroll-behavior: smooth; font-size: 16px; }
        
       body {
            font-family: 'Poppins', sans-serif;
            color: var(--text-light); background-color: var(--bg-dark-primary);
            background-image:
                radial-gradient(rgba(26, 32, 44, 0.5) 0.6px, transparent 0.6px), /* Even Finer dots */
                radial-gradient(rgba(26, 32, 44, 0.5) 0.6px, transparent 0.6px);
            background-size: 60px 60px; /* Wider spacing */
            background-position: 0 0, 30px 30px;
            line-height: 1.8; /* Increased line height */
            overflow-x: hidden;
            position: relative;
        }
        body.mobile-menu-active {
             overflow: hidden;
        }
        
        .container { max-width: 900px; width: 100%; margin: 0 auto; padding: 0 1.5rem; }
        
        .section { padding: 5rem 0; }
                
        .section-title {
            text-align: center; margin-bottom: 4.5rem; font-size: 3rem;
            font-weight: 700; color: var(--text-light); position: relative; padding-bottom: 1.5rem; letter-spacing: 1px;
            text-shadow: 0 2px 10px rgba(0, 0, 0, 0.3);
        }
        .section-title::before {
            content: ''; position: absolute; top: -15px; left: 50%; transform: translateX(-50%);
            width: 120px; height: 3px; background: var(--gradient-tech); opacity: 0.4; border-radius: 2px;
        }
        .section-title::after {
            content: ''; position: absolute; bottom: 0; left: 50%; transform: translateX(-50%);
            width: 140px; height: 5px; background: var(--gradient-tech); border-radius: 3px; box-shadow: var(--glow-cyan);
            animation: pulse-glow 3s infinite ease-in-out;
        }
        .btn {
            display: inline-block; padding: 1rem 2.2rem; border-radius: var(--border-radius); font-weight: 600;
            text-decoration: none; transition: all var(--transition-speed) var(--transition-smooth); cursor: pointer;
            border: 2px solid transparent; font-size: 1rem; position: relative; overflow: hidden; z-index: 1;
            text-transform: uppercase; letter-spacing: 0.5px;
        }
        .btn::before {
            content: ''; position: absolute; top: 0; left: -100%; width: 100%; height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.15), transparent);
            transition: left var(--transition-speed) ease-out; z-index: -1;
        }
        .btn:hover::before { left: 100%; }
        .btn-primary { background: var(--gradient-button); color: var(--text-light); box-shadow: var(--shadow-glow-md), 0 4px 10px rgba(0,0,0,0.3); }
        .btn-primary:hover { transform: translateY(-5px) scale(1.05); box-shadow: var(--shadow-glow-lg), 0 10px 20px rgba(0,0,0,0.4); filter: brightness(1.25); }
        .btn-secondary { background-color: transparent; color: var(--accent-cyan); border-color: var(--accent-cyan); box-shadow: var(--shadow-glow-sm); }
        .btn-secondary:hover { background-color: var(--accent-cyan); color: var(--bg-dark-primary); box-shadow: var(--glow-cyan), 0 4px 10px rgba(0, 229, 255, 0.2); transform: translateY(-3px) scale(1.03); }



        #main-header { background-color: rgba(8, 13, 20, 0.85); backdrop-filter: blur(14px); -webkit-backdrop-filter: blur(14px); padding: 1rem 0; position: sticky; top: 0; left:0; right: 0; width: 100%; z-index: 1000; border-bottom: 1px solid var(--border-color); transition: background-color var(--transition-speed) ease, box-shadow var(--transition-speed) ease, border-top-color var(--transition-speed) ease, padding var(--transition-speed) ease; border-top: 3px solid transparent; }
        #main-header.scrolled { background-color: rgba(8, 13, 20, 0.97); box-shadow: 0 8px 30px rgba(0, 0, 0, 0.4); border-bottom-color: rgba(55, 65, 81, 0.7); border-top: 3px solid var(--accent-cyan); padding: 0.8rem 0; }
        #main-header .container { display: flex; justify-content: space-between; align-items: center; }
        #navbar { display: flex; justify-content: space-between; align-items: center; width: 100%; }
        #navbar .logo { font-size: 1.9rem; font-weight: 800; color: var(--text-light); text-decoration: none; letter-spacing: -1px; display: flex; align-items: center; transition: transform var(--transition-speed) ease; font-family: 'Poppins', sans-serif; flex-shrink: 0; }
        #navbar .logo:hover { transform: scale(1.03) rotate(-2deg); }
        #navbar .logo i { margin-right: 0.7rem; font-size: 1.8rem; background: var(--gradient-tech); -webkit-background-clip: text; -webkit-text-fill-color: transparent; filter: drop-shadow(0 0 8px var(--accent-cyan)); transition: transform 0.6s var(--transition-bounce); }
        #navbar .logo:hover i { transform: rotate(360deg) scale(1.15); }
        #navbar ul#nav-links-desktop { list-style: none; display: flex; align-items: center; margin: 0; padding: 0; }
        #navbar ul#nav-links-desktop li { margin-left: 2.5rem; }
        #navbar ul#nav-links-desktop li a:not(.btn) { text-decoration: none; color: var(--text-medium); font-weight: 500; padding-bottom: 0.8rem; position: relative; transition: color var(--transition-speed) ease; letter-spacing: 0.7px; font-size: 1.05rem; white-space: nowrap; }
        #navbar ul#nav-links-desktop li a:not(.btn)::after { content: ''; position: absolute; bottom: -4px; left: 0; width: 0; height: 3px; background: var(--accent-cyan); border-radius: 1px; transition: width var(--transition-speed) var(--transition-bounce); box-shadow: var(--glow-cyan); }
        #navbar ul#nav-links-desktop li a:not(.btn):hover, #navbar ul#nav-links-desktop li a:not(.btn).active { color: var(--text-light); text-shadow: 0 0 6px rgba(0, 229, 255, 0.6); }
        #navbar ul#nav-links-desktop li a:not(.btn):hover::after, #navbar ul#nav-links-desktop li a:not(.btn).active::after { width: 100%; }
        .menu-toggle { display: none; cursor: pointer; font-size: 1.9rem; color: var(--text-light); padding: 5px; border: none; background: none; z-index: 1001; margin-left: 1rem; }
        ul#mobile-nav-links { list-style: none; display: none; flex-direction: column; position: absolute; top: 100%; left: 0; width: 100%; background-color: rgba(11, 18, 32, 0.99); backdrop-filter: blur(10px); -webkit-backdrop-filter: blur(10px); padding: 1.5rem 0; text-align: center; border-top: 1px solid var(--border-color); box-shadow: 0 15px 30px rgba(0,0,0,0.45); opacity: 0; transform: translateY(-15px) scaleY(0.95); transform-origin: top center; transition: opacity 0.3s ease, transform 0.3s ease, visibility 0s linear 0.3s; z-index: 999; visibility: hidden; }
        ul#mobile-nav-links.active { display: flex; opacity: 1; transform: translateY(0) scaleY(1); visibility: visible; transition: opacity 0.3s ease, transform 0.3s ease, visibility 0s linear 0s; }
        ul#mobile-nav-links li { margin: 1.3rem 0; }
        ul#mobile-nav-links li a { color: var(--text-medium); text-decoration: none; font-weight: 500; font-size: 1.2rem; padding: 0.7rem 1rem; transition: color var(--transition-speed) ease, background-color 0.2s ease; display: block; border-radius: 5px; margin: 0 1rem; }
        ul#mobile-nav-links li a.active, ul#mobile-nav-links li a:hover { color: var(--accent-cyan); background-color: rgba(0, 229, 255, 0.08); }


   #main-footer { background-color: var(--bg-dark-primary); color: var(--text-medium); padding: 5rem 0 3rem 0; border-top: 1px solid var(--border-color); }
        #main-footer .footer-content { display: grid; grid-template-columns: repeat(auto-fit, minmax(260px, 1fr)); gap: 3.5rem; align-items: start; }
        #main-footer .footer-column { margin-bottom: 1.5rem; }
        #main-footer .footer-logo { grid-column: 1 / -1; font-size: 2.2rem; font-weight: 800; color: var(--text-light); opacity: 0.95; margin-bottom: 2.5rem; text-align: center; display: block; font-family: 'Poppins', sans-serif; }
         #main-footer .footer-column h4 { color: var(--text-light); font-size: 1.4rem; margin-bottom: 1.5rem; font-weight: 600; position: relative; padding-bottom: 0.7rem; letter-spacing: 0.5px; }
         #main-footer .footer-column h4::after { content: ''; position: absolute; left: 0; bottom: 0; width: 50px; height: 3px; opacity: 0.8; border-radius: 1px; }
         #main-footer .footer-about h4::after { background: var(--accent-cyan); }
         #main-footer .footer-links-section h4::after { background: var(--accent-purple); }
         #main-footer .footer-contact h4::after { background: var(--accent-indigo); }
        #main-footer .footer-about p { font-size: 1rem; line-height: 1.8; margin-bottom: 1rem; }
        #main-footer .footer-links { list-style: none; display: flex; flex-direction: column; gap: 1rem; margin-bottom: 1.5rem; padding-left: 0; }
        #main-footer .footer-links a { color: var(--text-medium); text-decoration: none; transition: color var(--transition-speed) ease, padding-left 0.3s ease; font-size: 1rem; display: inline-block; padding: 0.2rem 0; }
        #main-footer .footer-links a:hover { color: var(--accent-cyan); text-shadow: 0 0 5px var(--accent-cyan); padding-left: 5px; }
        #main-footer .social-links { list-style: none; display: flex; gap: 2rem; margin-bottom: 1rem; font-size: 1.7rem; justify-content: flex-start; padding-left: 0; }
        #main-footer .social-links a { color: var(--text-medium); text-decoration: none; transition: color var(--transition-speed) ease, transform var(--transition-speed) ease; }
        #main-footer .social-links a:hover { color: var(--accent-cyan); transform: scale(1.25) translateY(-4px); filter: drop-shadow(0 0 10px var(--accent-cyan)); }
        #main-footer .footer-contact p { margin-top: 1rem; }
        #main-footer .footer-contact p a { color: var(--text-medium); text-decoration: none; transition: color var(--transition-speed) ease; font-size: 1rem; }
        #main-footer .footer-contact p a:hover { color: var(--accent-cyan); }
        #main-footer .copyright { grid-column: 1 / -1; text-align: center; font-size: 0.95rem; opacity: 0.7; line-height: 1.5; margin-top: 3rem; padding-top: 2.5rem; border-top: 1px solid var(--border-color); }
        #main-footer .copyright a { color: var(--text-medium); text-decoration: none; border-bottom: 1px dashed rgba(160, 174, 192, 0.5); transition: color 0.3s, border-color 0.3s; }
        #main-footer .copyright a:hover { color: var(--accent-cyan); border-bottom-color: var(--accent-cyan); }

        /* --- Support Widget (Consistency Check) --- */
        #support-widget { position: fixed; bottom: 25px; right: 25px; z-index: 1001; }
        #support-toggle { width: 60px; height: 60px; background: var(--gradient-support); border-radius: 50%; display: flex; justify-content: center; align-items: center; color: var(--text-light); font-size: 1.8rem; cursor: pointer; border: none; box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3), var(--shadow-glow-sm); transition: transform 0.3s var(--transition-bounce), box-shadow 0.3s ease; animation: pulse-support 2.5s infinite ease-in-out; }
        #support-toggle:hover { transform: scale(1.1); box-shadow: 0 8px 20px rgba(0, 0, 0, 0.4), var(--shadow-glow-md); }
        #support-options { position: absolute; bottom: 75px; right: 0; display: flex; flex-direction: column; gap: 12px; opacity: 0; visibility: hidden; transform: translateY(15px) scale(0.9); transform-origin: bottom right; transition: all 0.3s var(--transition-bounce); }
        #support-widget.active #support-options { opacity: 1; visibility: visible; transform: translateY(0) scale(1); }
        #support-options a { width: 50px; height: 50px; background-color: var(--bg-dark-tertiary); border: 1px solid var(--border-color); border-radius: 50%; display: flex; justify-content: center; align-items: center; color: var(--text-medium); font-size: 1.5rem; text-decoration: none; box-shadow: 0 4px 10px rgba(0, 0, 0, 0.2); transition: all 0.3s ease; }
        #support-options a:hover { transform: scale(1.1) rotate(5deg); box-shadow: var(--glow-cyan); }
         #support-options a.whatsapp:hover { background-color: #25D366; color: white; box-shadow: 0 0 15px #25D366; }
         #support-options a.telegram:hover { background-color: #0088cc; color: white; box-shadow: 0 0 15px #0088cc; }
         #support-options a.call:hover { background-color: var(--accent-pink); color: white; box-shadow: 0 0 15px var(--accent-pink); }

        /* --- Ad Banner (Fixed Animation & Display) --- */
        #ad-banner {
            position: fixed; bottom: 25px; left: 25px; background-color: rgba(26, 32, 44, 0.97);
            padding: 1rem 1.5rem; border-radius: var(--border-radius); border: 1px solid var(--border-accent);
            z-index: 1000; display: flex; align-items: center; gap: 1rem; max-width: 320px;
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.45);
            opacity: 0; /* Start Hidden */
            visibility: hidden; /* Start Hidden */
            transform: translateX(-110%); /* Start off-screen */
            transition: opacity 0.5s ease, transform 0.5s ease, visibility 0s linear 0.5s; /* Transition including visibility */
        }
        #ad-banner.visible { /* Class added by JS after delay */
             opacity: 1;
             visibility: visible;
             transform: translateX(0);
             transition: opacity 0.7s ease-out, transform 0.7s cubic-bezier(0.25, 1, 0.5, 1), visibility 0s linear 0s; /* Smooth in transition */
        }
        #ad-banner.hidden {
            opacity: 0;
            visibility: hidden;
            transform: translateX(-110%);
            transition: opacity 0.5s ease-in, transform 0.5s ease-in, visibility 0s linear 0.5s; /* Smooth out transition */
            pointer-events: none;
        }
        #ad-banner p { margin: 0; font-size: 0.95rem; color: var(--text-medium); flex-grow: 1; }
        #ad-banner p strong { color: var(--accent-cyan); font-weight: 600; }
        #ad-banner p a { color: var(--accent-pink); text-decoration: none; border-bottom: 1px dotted var(--accent-pink); transition: color 0.3s ease, border-color 0.3s ease; }
        #ad-banner p a:hover { color: var(--accent-cyan); border-bottom-color: var(--accent-cyan); }
        #close-ad-btn { background: none; border: none; color: var(--text-medium); font-size: 1.4rem; cursor: pointer; transition: color 0.3s ease, transform 0.3s ease; padding: 0.2rem; line-height: 1; align-self: flex-start; }
        #close-ad-btn:hover { color: var(--accent-pink); transform: scale(1.15) rotate(90deg); }
        
        
        /* --- Checkout Page Specific Styles (Refined) --- */
        .checkout-container { background-color: var(--bg-dark-secondary); padding: 2.5rem 3rem; border-radius: var(--border-radius); border: 1px solid var(--border-color); box-shadow: var(--shadow-dark-soft); }
        .order-summary { margin-bottom: 3rem; padding-bottom: 2rem; border-bottom: 1px dashed var(--border-color); animation: fade-in-up 0.5s ease-out; }
        .order-summary h2 { color: var(--accent-cyan); margin-bottom: 1.5rem; font-size: 1.8rem; text-align: center; border-bottom: 1px solid var(--border-color); padding-bottom: 1rem; }
        .order-summary p { font-size: 1.1rem; margin-bottom: 0.8rem; color: var(--text-medium); display: flex; justify-content: space-between; flex-wrap: wrap; }
        .order-summary p strong { color: var(--text-light); font-weight: 600; margin-right: 10px; }
        .order-summary .rate-value { color: var(--accent-green); font-family: var(--font-mono); font-weight: 600; }

        .order-details-form { animation: fade-in-up 0.5s 0.1s ease-out both; } /* Stagger animation */
        .order-details-form h2 { color: var(--accent-purple); margin-bottom: 2rem; font-size: 1.8rem; text-align: center; }
        .form-group { margin-bottom: 1.8rem; position: relative; /* For validation messages */ }
        .form-group label { display: block; color: var(--text-medium); margin-bottom: 0.7rem; font-weight: 500; font-size: 0.95rem; text-transform: uppercase; letter-spacing: 0.5px; }
        .form-group input[type="url"], .form-group input[type="number"], .form-group input[type="text"] { width: 100%; padding: 1rem 1.2rem; background-color: rgba(8, 13, 20, 0.8); border: 1px solid var(--border-color); border-radius: 8px; color: var(--text-light); font-size: 1.05rem; font-family: var(--font-primary); transition: border-color 0.3s ease, box-shadow 0.3s ease; }
        .form-group input:focus { outline: none; border-color: var(--accent-cyan); box-shadow: 0 0 10px rgba(0, 229, 255, 0.2); }
        .form-group input[type="number"] { font-family: var(--font-mono); }
        .form-group .input-hint { font-size: 0.85rem; color: var(--text-medium); opacity: 0.8; margin-top: 0.5rem; display: block; }
        .form-group .error-message { /* Style for validation errors */
            color: var(--accent-pink);
            font-size: 0.85rem;
            margin-top: 0.4rem;
            display: none; /* Hidden by default */
        }
        .form-group input.invalid { border-color: var(--accent-pink); }
        .form-group input.invalid + .error-message { display: block; }

        .total-price-display { margin-top: 1.5rem; padding: 1rem 1.5rem; background-color: rgba(8, 13, 20, 0.5); border: 1px solid var(--border-color); border-radius: 8px; text-align: center; transition: background-color 0.3s ease; }
        .total-price-display span { font-size: 1.3rem; font-weight: 700; color: var(--accent-green); font-family: var(--font-mono); }

        .terms-agreement { margin: 2.5rem 0; display: flex; align-items: center; justify-content: center; gap: 0.8rem; }
        .terms-agreement input[type="checkbox"] { width: 18px; height: 18px; accent-color: var(--accent-cyan); cursor: pointer; }
        .terms-agreement label { font-size: 1rem; color: var(--text-medium); cursor: pointer; }
        .terms-agreement label a { color: var(--accent-cyan); text-decoration: none; border-bottom: 1px dotted var(--accent-cyan); }
        .terms-agreement label a:hover { color: var(--accent-purple); border-bottom-color: var(--accent-purple); }
        #place-order-btn { width: 100%; transition: opacity 0.3s ease, background 0.3s ease; }
        #place-order-btn:disabled { opacity: 0.5; cursor: not-allowed; background: var(--bg-dark-tertiary); box-shadow: none; transform: none; filter: none; }

        /* Payment Section Styles */
        #payment-section { display: none; margin-top: 3rem; padding-top: 3rem; border-top: 1px dashed var(--border-color); opacity: 0; transition: opacity 0.5s ease; }
        #payment-section.visible { display: block; opacity: 1; animation: fade-in-up 0.6s ease-out; }
        #payment-section h3 { text-align: center; font-size: 1.6rem; color: var(--accent-gold); margin-bottom: 2rem; }
        .payment-methods-select { display: flex; justify-content: center; gap: 1.5rem; margin-bottom: 2.5rem; flex-wrap: wrap; }
        .payment-method-btn { padding: 0.8rem 1.5rem; border: 1px solid var(--border-color); background-color: var(--bg-dark-tertiary); color: var(--text-medium); border-radius: 8px; cursor: pointer; transition: all 0.3s ease; display: flex; align-items: center; gap: 0.6rem; font-size: 1rem; }
        .payment-method-btn img { height: 25px; width: auto; }
        .payment-method-btn:hover, .payment-method-btn.selected { border-color: var(--accent-cyan); color: var(--text-light); background-color: rgba(0, 229, 255, 0.1); transform: translateY(-3px); }
        .payment-details { display: none; margin-top: 2rem; background-color: rgba(8, 13, 20, 0.7); padding: 2rem; border-radius: var(--border-radius); border: 1px solid var(--border-color); opacity: 0; transition: opacity 0.4s ease; }
        .payment-details.visible { display: block; opacity: 1; animation: fade-in-up 0.5s ease-out; }
        .payment-details p { margin-bottom: 1rem; font-size: 1.05rem; }
        .payment-details .payment-number { font-size: 1.2rem; font-family: var(--font-mono); color: var(--accent-cyan); background-color: var(--bg-dark-primary); padding: 0.5rem 1rem; border-radius: 6px; display: inline-block; margin: 0.5rem 0 1.5rem 0; border: 1px solid var(--border-color); cursor: copy; position: relative; }
        .payment-details .payment-number::after { content: 'Click to Copy'; position: absolute; bottom: 110%; left: 50%; transform: translateX(-50%); background-color: var(--accent-purple); color: var(--text-light); padding: 0.3rem 0.6rem; border-radius: 4px; font-size: 0.8rem; white-space: nowrap; opacity: 0; visibility: hidden; transition: opacity 0.2s ease, visibility 0.2s ease; pointer-events: none; }
        .payment-details .payment-number:hover::after { opacity: 1; visibility: visible; }
        .payment-details .payment-number.copied::after { content: 'Copied!'; background-color: var(--accent-green); }
        .confirm-payment-btn { width: 100%; margin-top: 1rem; }
        .confirm-payment-btn:disabled { opacity: 0.5; cursor: not-allowed; background: var(--bg-dark-tertiary); box-shadow: none; transform: none; filter: none; }




@media (max-width: 992px) {
            #navbar ul#nav-links-desktop { display: none; }
            .menu-toggle { display: block; }
            #main-footer .footer-content { grid-template-columns: repeat(auto-fit, minmax(280px, 1fr)); }
            #main-footer .footer-column { text-align: left; }
            #main-footer .footer-column h4::after { left: 0; transform: none; }
            #main-footer .social-links { justify-content: flex-start; }
         
        }
        
        /* Responsive */
        @media (max-width: 768px) { .checkout-container { padding: 2rem 1.5rem; } .order-summary p { font-size: 1rem; } .order-details-form h2, .order-summary h2 { font-size: 1.6rem; } .form-group input[type="url"], .form-group input[type="number"], .form-group input[type="text"] { font-size: 1rem; padding: 0.9rem 1rem;} .total-price-display span { font-size: 1.2rem; } .terms-agreement label { font-size: 0.9rem; } #payment-section h3 { font-size: 1.4rem; } .payment-methods-select { gap: 1rem; } .payment-method-btn { padding: 0.7rem 1.2rem; font-size: 0.9rem; } .payment-details { padding: 1.5rem; }
        
             html { font-size: 14px; }
             .section { padding: 5rem 0; }
             .section-title { font-size: 2.6rem; margin-bottom: 3.5rem;}
        
             #main-footer .footer-content { grid-template-columns: 1fr; text-align: center; }
             #main-footer .footer-column h4::after { left: 50%; transform: translateX(-50%); }
             #main-footer .footer-links { align-items: center; }
             #main-footer .social-links { justify-content: center; }
             #ad-banner { max-width: calc(100vw - 40px); left: 20px; bottom: 20px; padding: 0.9rem 1.2rem; }
             #support-widget { bottom: 20px; right: 20px; }
        
         }
        
        
        @media (max-width: 480px) { .checkout-container { padding: 1.5rem 1rem; } .order-summary p { flex-direction: column; align-items: flex-start; gap: 0.2rem; } .total-price-display { padding: 0.8rem 1rem;} .total-price-display span { font-size: 1.1rem; } .terms-agreement { flex-direction: column; align-items: flex-start; gap: 0.5rem;} .payment-methods-select { flex-direction: column; align-items: stretch; } .payment-method-btn { justify-content: center; } .payment-details .payment-number { font-size: 1.1rem; } 
        
        
             #ad-banner { padding: 0.8rem 1rem; gap: 0.8rem; bottom: 15px; left: 15px; }
             #ad-banner p { font-size: 0.9rem; }
             #close-ad-btn { font-size: 1.2rem; }
             #support-widget { bottom: 15px; right: 15px; }
             #support-toggle { width: 55px; height: 55px; font-size: 1.6rem;}
             #support-options { bottom: 70px; gap: 10px; }
             #support-options a { width: 45px; height: 45px; font-size: 1.4rem; }
             
              html { font-size: 15px; }
             .section { padding: 4rem 0; }
             .section-title { font-size: 2.2rem; }
        }

    </style>
</head>
<body>

    <!-- Header -->
    <header id="main-header"> <div class="container"><nav id="navbar"><a href="index.html" class="logo"><i class="fas fa-atom"></i>Quantum SMM</a><ul id="nav-links-desktop"><li><a href="index.html">Matrix</a></li><li><a href="services.html">Services</a></li><li><a href="index.html#features">Features</a></li><li><a href="about.html">About Us</a></li><li><a href="contact.html">Contact Us</a></li><li><a href="index.html#faq">FAQ</a></li></ul><button class="menu-toggle" id="mobile-menu" aria-label="Toggle menu" aria-expanded="false"><i class="fas fa-bars"></i></button></nav></div><ul id="mobile-nav-links"><li><a href="index.html">Matrix</a></li><li><a href="services.html">Services</a></li><li><a href="index.html#features">Features</a></li><li><a href="about.html">About Us</a></li><li><a href="contact.html">Contact Us</a></li><li><a href="index.html#faq">FAQ</a></li></ul></header>

    <!-- ****** START CHECKOUT PAGE CONTENT ****** -->

    <section class="section">
        <div class="container">
            <div class="checkout-container animated-element">

                <!-- Order Summary -->
                <div class="order-summary">
                    <h2>Order Summary</h2>
                    <p><strong>Service ID:</strong> <span id="summary-service-id">N/A</span></p>
                    <p><strong>Service Name:</strong> <span id="summary-service-name">No service selected</span></p>
                    <p><strong>Rate per 1000:</strong> <span id="summary-rate" class="rate-value">$0.00</span></p>
                </div>

                <!-- Order Details Form -->
                <form id="order-details-form" class="order-details-form">
                    <h2>Provide Order Details</h2>
                    <div class="form-group">
                        <label for="link">Link</label>
                        <input type="url" id="link" name="link" placeholder="e.g., https://www.instagram.com/p/..." required>
                        <span class="input-hint">Enter the full link (URL) for the service.</span>
                        <span class="error-message" id="link-error">Please enter a valid URL (e.g., https://...).</span>
                    </div>
                    <div class="form-group">
                        <label for="quantity">Quantity</label>
                        <input type="number" id="quantity" name="quantity" placeholder="e.g., 1000" required>
                        <span class="input-hint" id="quantity-hint">Min: - / Max: -</span>
                         <span class="error-message" id="quantity-error">Quantity must be between Min and Max.</span>
                    </div>
                    <div class="total-price-display">
                         Total Price: <span id="total-price">$0.00</span>
                    </div>

                    <div class="terms-agreement">
                         <input type="checkbox" id="terms" name="terms" required>
                         <label for="terms">I agree to the <a href="#" target="_blank">Terms & Conditions</a></label> <!-- Add link to actual terms page -->
                    </div>

                    <div class="form-group">
                        <button type="button" id="place-order-btn" class="btn btn-primary" disabled>Place Order & Proceed to Payment</button>
                    </div>
                </form>

                <!-- Payment Section (Hidden Initially) -->
                <div id="payment-section">
                    <h3>Select Payment Method</h3>
                    <div class="payment-methods-select">
                        <button type="button" class="payment-method-btn" data-method="bkash">
                             <img src="https://via.placeholder.com/80x25/e2136e/ffffff?text=bKash" alt="bKash" style="height: 25px;">
                        </button>
                         <button type="button" class="payment-method-btn" data-method="nagad">
                            <img src="https://via.placeholder.com/80x25/f58220/ffffff?text=Nagad" alt="Nagad" style="height: 25px;">
                        </button>
                         <button type="button" class="payment-method-btn" data-method="rocket">
                            <img src="https://via.placeholder.com/80x25/8b008b/ffffff?text=Rocket" alt="Rocket" style="height: 25px;">
                        </button>
                    </div>

                    <!-- Payment Details Area -->
                    <div id="bkash-details" class="payment-details">
                        <h4>bKash Payment</h4>
                        <p>Please send <strong id="bkash-amount">$0.00</strong> using bKash Send Money to the number below:</p>
                        <p><strong>bKash Number:</strong> <span class="payment-number" id="bkash-number" title="Click to Copy">01XXXXXXXXX</span></p> <!-- UPDATE NUMBER -->
                        <p>After sending, enter the Transaction ID (TrxID) you received via SMS.</p>
                        <div class="form-group">
                            <label for="bkash-trxid">bKash Transaction ID (TrxID)</label>
                            <input type="text" id="bkash-trxid" name="trxid" placeholder="Enter bKash TrxID" required>
                             <span class="error-message" id="bkash-trxid-error">TrxID is required.</span>
                        </div>
                        <button type="button" id="confirm-payment-btn-bkash" class="btn btn-primary confirm-payment-btn">Confirm Payment</button>
                    </div>

                    <div id="nagad-details" class="payment-details">
                        <h4>Nagad Payment</h4>
                        <p>Please send <strong id="nagad-amount">$0.00</strong> using Nagad Send Money to the number below:</p>
                        <p><strong>Nagad Number:</strong> <span class="payment-number" id="nagad-number" title="Click to Copy">01XXXXXXXXX</span></p> <!-- UPDATE NUMBER -->
                        <p>After sending, enter the Transaction ID (TrxID) you received via SMS.</p>
                         <div class="form-group">
                            <label for="nagad-trxid">Nagad Transaction ID (TrxID)</label>
                            <input type="text" id="nagad-trxid" name="trxid" placeholder="Enter Nagad TrxID" required>
                             <span class="error-message" id="nagad-trxid-error">TrxID is required.</span>
                        </div>
                         <button type="button" id="confirm-payment-btn-nagad" class="btn btn-primary confirm-payment-btn">Confirm Payment</button>
                    </div>

                    <div id="rocket-details" class="payment-details">
                         <h4>Rocket Payment</h4>
                         <p>Please send <strong id="rocket-amount">$0.00</strong> using Rocket Send Money to the number below:</p>
                         <p><strong>Rocket Number:</strong> <span class="payment-number" id="rocket-number" title="Click to Copy">01XXXXXXXXXX</span></p> <!-- UPDATE NUMBER -->
                         <p>After sending, enter the Transaction ID (TrxID) you received via SMS.</p>
                         <div class="form-group">
                            <label for="rocket-trxid">Rocket Transaction ID (TrxID)</label>
                            <input type="text" id="rocket-trxid" name="trxid" placeholder="Enter Rocket TrxID" required>
                             <span class="error-message" id="rocket-trxid-error">TrxID is required.</span>
                        </div>
                          <button type="button" id="confirm-payment-btn-rocket" class="btn btn-primary confirm-payment-btn">Confirm Payment</button>
                    </div>
                </div>

            </div>
        </div>
    </section>

    <!-- ****** END CHECKOUT PAGE CONTENT ****** -->

    <!-- Footer -->
    <footer id="main-footer">
        <div class="container">
            <div class="footer-content">
                 <div class="footer-logo">Quantum SMM</div>
                 <div class="footer-column footer-about">
                    <h4>About Us</h4>
                    <p>Quantum SMM provides elite social media marketing services, focusing on speed, quality, and reliability for rapid growth.</p>
                 </div>
                 <div class="footer-column footer-links-section">
                     <h4>Quick Links</h4>
                     <ul class="footer-links">
                         <li><a href="index.html">Home</a></li>
                         <li><a href="services.html">Services</a></li>
                         <li><a href="about.html">About Us</a></li>
                         <li><a href="contact.html">Contact Us</a></li>
                         <li><a href="index.html#faq">FAQ</a></li>
                         <li><a href="#">Terms of Service</a></li>
                         <li><a href="#">Privacy Policy</a></li>
                     </ul>
                 </div>
                 <div class="footer-column footer-links-section"> <!-- Service Categories Column -->
                      <h4>Service Categories</h4>
                      <ul class="footer-links">
                          <li><a href="services.html#platform-filter" onclick="filterPlatformFromLink('Instagram'); return false;">Instagram</a></li>
                          <li><a href="services.html#platform-filter" onclick="filterPlatformFromLink('Facebook'); return false;">Facebook</a></li>
                          <li><a href="services.html#platform-filter" onclick="filterPlatformFromLink('YouTube'); return false;">YouTube</a></li>
                          <li><a href="services.html#platform-filter" onclick="filterPlatformFromLink('TikTok'); return false;">TikTok</a></li>
                          <li><a href="services.html#platform-filter" onclick="filterPlatformFromLink('Telegram'); return false;">Telegram</a></li>
                          <li><a href="services.html#platform-filter" onclick="filterPlatformFromLink('all'); return false;">View All</a></li>
                      </ul>
                  </div>
                 <div class="footer-column footer-contact">
                    <h4>Connect & Support</h4>
                     <ul class="social-links">
                         <li><a href="https://wa.me/YOUR_WHATSAPP_NUMBER" target="_blank" aria-label="WhatsApp"><i class="fab fa-whatsapp"></i></a></li>
                         <li><a href="https://t.me/YOUR_TELEGRAM_USERNAME" target="_blank" aria-label="Telegram"><i class="fab fa-telegram-plane"></i></a></li>
                         <li><a href="tel:YOUR_PHONE_NUMBER" aria-label="Call"><i class="fas fa-phone"></i></a></li>
                         <li><a href="#" target="_blank" aria-label="Facebook"><i class="fab fa-facebook-f"></i></a></li>
                     </ul>
                     <p><a href="mailto:support@quantumsmm.com">support@quantumsmm.com</a></p>
                 </div>
                 <p class="copyright">System Build: v3.19 | © <span id="year"></span> Quantum SMM Network. All Rights Reserved. | Design Inspiration by Quantum Core Labs</p>
            </div>
        </div>
    </footer>

    <!-- Support Widget -->
    <div id="support-widget">
        <button id="support-toggle" aria-label="Open Support Options"> <i class="fas fa-headset"></i> </button>
        <div id="support-options">
            <a href="tel:YOUR_PHONE_NUMBER" class="call" aria-label="Call Us" title="Call Us"><i class="fas fa-phone"></i></a>
            <a href="https://wa.me/YOUR_WHATSAPP_NUMBER" target="_blank" class="whatsapp" aria-label="Chat on WhatsApp" title="Chat on WhatsApp"><i class="fab fa-whatsapp"></i></a>
            <a href="https://t.me/YOUR_TELEGRAM_USERNAME" target="_blank" class="telegram" aria-label="Chat on Telegram" title="Chat on Telegram"><i class="fab fa-telegram-plane"></i></a>
        </div>
    </div>

    <!-- Ad Banner -->
    <div id="ad-banner">
         <p><strong>Flash Sale!</strong> Limited time offer on YouTube Views! <a href="services.html#services-table-section" onclick="filterPlatformFromLink('YouTube'); return false;">Check Now!</a></p> <!-- Updated Link -->
        <button id="close-ad-btn" aria-label="Close Ad"> <i class="fas fa-times"></i> </button>
    </div>


<script src="https://cdn.jsdelivr.net/npm/js-cookie@3/dist/js.cookie.min.js"></script>
<script>
    document.addEventListener('DOMContentLoaded', () => {

        // --- Basic Setup (Year, Menu, Header, Widgets) ---
        const yearElement = document.getElementById('year');
        if (yearElement) { yearElement.textContent = new Date().getFullYear(); }

        // Mobile Menu Logic
        const menuToggle = document.getElementById('mobile-menu');
        const mobileNav = document.getElementById('mobile-nav-links');
        const body = document.body;
        if (menuToggle && mobileNav) {
            menuToggle.addEventListener('click', () => {
                const isExpanded = menuToggle.getAttribute('aria-expanded') === 'true';
                menuToggle.setAttribute('aria-expanded', String(!isExpanded));
                mobileNav.classList.toggle('active');
                body.classList.toggle('mobile-menu-active', !isExpanded);
                const icon = menuToggle.querySelector('i');
                if (icon) { icon.className = !isExpanded ? 'fas fa-times' : 'fas fa-bars'; }
            });
            mobileNav.querySelectorAll('a').forEach(link => {
                link.addEventListener('click', () => {
                    if (link.getAttribute('href')?.startsWith('#') || link.classList.contains('btn') || link.getAttribute('href')?.endsWith('.html')) {
                        if (mobileNav.classList.contains('active')) { menuToggle.click(); }
                    }
                });
            });
        }

        // Sticky Header Logic
        const header = document.getElementById('main-header');
        if (header) {
            const handleScroll = () => {
                let scrollTop = window.pageYOffset || document.documentElement.scrollTop;
                header.classList.toggle('scrolled', scrollTop > 50);
            };
            window.addEventListener('scroll', handleScroll, { passive: true });
        }

         // Active Nav Link Highlighting (Simple for Checkout Page - No active link needed usually)
         // You might want to highlight 'Services' if coming from there, but it's complex.
         // Keeping it simple: remove active class from all.
         const allNavLinks = document.querySelectorAll('#nav-links-desktop a, #mobile-nav-links a');
         allNavLinks.forEach(link => link.classList.remove('active'));


        // Support Widget Logic
        const supportWidget = document.getElementById('support-widget');
        const supportToggle = document.getElementById('support-toggle');
        const supportIcon = supportToggle ? supportToggle.querySelector('i') : null;
        if (supportWidget && supportToggle && supportIcon) {
           supportToggle.addEventListener('click', (e) => {
               e.stopPropagation();
               const isActive = supportWidget.classList.toggle('active');
               supportIcon.className = isActive ? 'fas fa-times' : 'fas fa-headset';
               supportToggle.setAttribute('aria-label', isActive ? 'Close Support Options' : 'Open Support Options');
           });
            document.addEventListener('click', (event) => {
                if (supportWidget.classList.contains('active') && !supportWidget.contains(event.target)) {
                    supportToggle.click();
                }
            });
            const supportOptions = document.getElementById('support-options');
            if(supportOptions) {
                supportOptions.addEventListener('click', (e) => e.stopPropagation());
            }
        }

        // Ad Banner Logic
        const adBanner = document.getElementById('ad-banner');
        const closeAdBtn = document.getElementById('close-ad-btn');
        const AD_CLOSED_KEY = 'quantumAdClosed_v1';
        let adShowTimeout;
        if (adBanner) {
            function showAdBanner() {
                if (adBanner && !adBanner.classList.contains('visible') && !adBanner.classList.contains('hidden-permanently')) {
                     try {
                         if (localStorage.getItem(AD_CLOSED_KEY) !== 'true') {
                             adBanner.classList.add('visible');
                         } else {
                            adBanner.style.display = 'none';
                            adBanner.classList.add('hidden-permanently');
                         }
                     } catch (e) {
                         console.warn('localStorage access error, showing ad.');
                         adBanner.classList.add('visible');
                     }
                }
            }
           try { if (localStorage.getItem(AD_CLOSED_KEY) === 'true') { adBanner.style.display = 'none'; adBanner.classList.add('hidden-permanently'); } }
           catch(e) { console.warn("localStorage error on initial check"); }
           if (!adBanner.classList.contains('hidden-permanently')) {
               adShowTimeout = setTimeout(showAdBanner, 1500); // Show after 1.5 seconds
           }
           if (closeAdBtn) {
               closeAdBtn.addEventListener('click', () => {
                    clearTimeout(adShowTimeout);
                    adBanner.classList.remove('visible');
                    adBanner.classList.add('hidden');
                    adBanner.classList.add('hidden-permanently');
                    try { localStorage.setItem(AD_CLOSED_KEY, 'true'); }
                    catch (e) { console.warn('localStorage access error.'); }
                    setTimeout(() => { if(adBanner) adBanner.style.display = 'none'; }, 500); // Hide after animation
               });
           }
        }
        // --- End Basic Setup ---


        // --- Checkout Page Specific Logic ---

        const summaryServiceId = document.getElementById('summary-service-id');
        const summaryServiceName = document.getElementById('summary-service-name');
        const summaryRate = document.getElementById('summary-rate');
        const quantityInput = document.getElementById('quantity');
        const quantityHint = document.getElementById('quantity-hint');
        const linkInput = document.getElementById('link');
        const totalPriceDisplay = document.getElementById('total-price');
        const termsCheckbox = document.getElementById('terms');
        const placeOrderBtn = document.getElementById('place-order-btn');
        const paymentSection = document.getElementById('payment-section');
        const paymentMethodBtns = document.querySelectorAll('.payment-method-btn');
        const paymentDetailsDivs = document.querySelectorAll('.payment-details');
        const confirmPaymentBtns = document.querySelectorAll('.confirm-payment-btn');

        const linkErrorSpan = document.getElementById('link-error');
        const quantityErrorSpan = document.getElementById('quantity-error');

        let currentOrderData = {};
        let serviceMin = 0;
        let serviceMax = Infinity;
        let ratePer1000 = 0;
        let selectedPaymentMethod = null;

        // --- Cookie Handling ---
        function getCookie(name) {
            const value = Cookies.get(name);
            try { return value ? JSON.parse(value) : null; }
            catch (e) { console.error("Error parsing cookie:", name, e); return null; }
        }
        function deleteCookie(name) { Cookies.remove(name, { path: '/' }); }

        // --- Helper function to parse numbers with K/M suffixes ---
        function parseQuantitySuffix(valueString) {
            if (!valueString) return NaN;
            const cleanedString = String(valueString).toUpperCase().trim();
            // Handle "Unlimited" or similar non-numeric max values
            if (isNaN(parseFloat(cleanedString))) return Infinity;

            const lastChar = cleanedString.slice(-1);
            let numPart = parseFloat(cleanedString);

            if (isNaN(numPart)) return NaN;

            if (lastChar === 'K') {
                numPart *= 1000;
            } else if (lastChar === 'M') {
                numPart *= 1000000;
            }
            return numPart;
        }

        // --- Input Validation Functions ---
        function validateLinkInput() {
            const link = linkInput.value.trim();
            let isValid = false;
            if (link) {
                try {
                    const parsedUrl = new URL(link);
                    isValid = parsedUrl.protocol === "http:" || parsedUrl.protocol === "https:";
                } catch (_) { isValid = false; }
            }
            linkInput.classList.toggle('invalid', !isValid && link !== ''); // Show invalid only if not empty and invalid
            if(linkErrorSpan) linkErrorSpan.style.display = isValid || link === '' ? 'none' : 'block';
            return isValid;
        }

        function validateQuantityInput() {
            const quantityValue = quantityInput.value.trim();
            // Allow empty input initially without showing error
            if (quantityValue === '') {
                 quantityInput.classList.remove('invalid');
                 if (quantityErrorSpan) quantityErrorSpan.style.display = 'none';
                 return false; // Not valid for placing order, but not an 'error' state yet
             }

            const quantity = parseInt(quantityValue, 10);
            let isValid = !isNaN(quantity) && quantity >= serviceMin && quantity <= serviceMax;

            quantityInput.classList.toggle('invalid', !isValid);

            if (quantityErrorSpan) {
                 quantityErrorSpan.style.display = 'none'; // Hide error initially
                 if (isNaN(quantity)) {
                     quantityErrorSpan.textContent = `Please enter a valid number.`;
                     quantityErrorSpan.style.display = 'block';
                 } else if (quantity < serviceMin) {
                     quantityErrorSpan.textContent = `Minimum quantity is ${serviceMin.toLocaleString()}.`;
                     quantityErrorSpan.style.display = 'block';
                 } else if (quantity > serviceMax) {
                      quantityErrorSpan.textContent = `Maximum quantity is ${serviceMax === Infinity ? 'Unlimited' : serviceMax.toLocaleString()}.`;
                     quantityErrorSpan.style.display = 'block';
                 }
            }
            return isValid;
        }

        // --- Update Total Price ---
         function updateTotalPrice() {
             const quantityValue = quantityInput.value.trim();
             const quantity = quantityValue === '' ? 0 : parseInt(quantityValue, 10); // Treat empty as 0 for calculation
             let total = 0;
             // Calculate price only if quantity is a valid number within range
             if (!isNaN(quantity) && ratePer1000 > 0 && quantity >= serviceMin && quantity <= serviceMax) {
                 total = (quantity / 1000) * ratePer1000;
             }
             totalPriceDisplay.textContent = `$${total.toFixed(2)}`;
             // Update amounts in payment details divs
             document.querySelectorAll('[id$="-amount"]').forEach(el => {
                el.textContent = `$${total.toFixed(2)}`;
             });
         }

         // --- Check Form Validity for Place Order Button ---
         function checkFormValidity() {
             // Check validity but allow placing order only if *all* are valid AND terms are checked
             const linkIsValid = validateLinkInput();
             const quantityIsValid = validateQuantityInput();
             const termsChecked = termsCheckbox.checked;

             // Button is enabled only when link is valid, quantity is valid, AND terms are checked
             placeOrderBtn.disabled = !(linkIsValid && quantityIsValid && termsChecked);
         }

        // --- Load Order Data From Cookie ---
        const pendingOrder = getCookie('pendingOrder');
        if (pendingOrder && summaryServiceId && summaryServiceName && summaryRate) {
             currentOrderData = pendingOrder;
             summaryServiceId.textContent = pendingOrder.serviceId || 'N/A';
             summaryServiceName.textContent = pendingOrder.serviceName || 'N/A';
             ratePer1000 = pendingOrder.ratePer1000 || 0;
             summaryRate.textContent = `$${ratePer1000.toFixed(2)}`;

             const minMaxParts = pendingOrder.minMax?.split('/') || [];
             serviceMin = parseQuantitySuffix(minMaxParts[0]) || 0;
             serviceMax = parseQuantitySuffix(minMaxParts[1]); // Let it be NaN if parsing fails initially
             if (isNaN(serviceMax)) serviceMax = Infinity; // Default to Infinity if parsing resulted in NaN

             if(quantityHint) quantityHint.textContent = `Min: ${serviceMin.toLocaleString()} / Max: ${serviceMax === Infinity ? 'Unlimited' : serviceMax.toLocaleString()}`;
             if(quantityInput) {
                 quantityInput.min = serviceMin;
                 if(serviceMax !== Infinity && serviceMax <= Number.MAX_SAFE_INTEGER) { quantityInput.max = serviceMax; }
                 else { quantityInput.removeAttribute('max'); }
                 quantityInput.placeholder = `Min ${serviceMin.toLocaleString()}`;

                 quantityInput.addEventListener('input', () => {
                     validateQuantityInput(); // Validate first
                     updateTotalPrice();      // Update price based on potentially valid input
                     checkFormValidity();     // Check button state
                 });
             }
             if(linkInput) {
                 linkInput.addEventListener('input', () => {
                     validateLinkInput();
                     checkFormValidity();
                 });
             }
             if(termsCheckbox) {
                 termsCheckbox.addEventListener('change', checkFormValidity);
             }
             // Initial validation check
             validateLinkInput();
             validateQuantityInput();
             updateTotalPrice();
             checkFormValidity();

        } else {
             if (document.getElementById('order-details-form')) {
                document.getElementById('order-details-form').innerHTML = '<p style="text-align: center; color: var(--accent-pink);">Could not load order details. Please go back to the <a href="services.html" style="color: var(--accent-cyan);">Services page</a> and select a service.</p>';
             }
             if(document.querySelector('.order-summary')) {
                 document.querySelector('.order-summary').innerHTML = '<h2>Order Summary</h2><p style="text-align:center; color: var(--text-medium);">Please select a service first.</p>';
             }
             if(placeOrderBtn) placeOrderBtn.disabled = true; // Disable if no data
        }

         // --- Place Order Button Click Handler ---
         if (placeOrderBtn) {
             placeOrderBtn.addEventListener('click', () => {
                 if (!validateLinkInput() || !validateQuantityInput() || !termsCheckbox.checked) {
                     alert("Please ensure the Link and Quantity are valid and you agree to the Terms.");
                     // Explicitly trigger validation to show errors if fields are empty
                     validateLinkInput();
                     validateQuantityInput();
                     return;
                 }
                 if (paymentSection) {
                     paymentSection.classList.add('visible');
                     placeOrderBtn.disabled = true;
                     placeOrderBtn.style.opacity = '0.7'; // Visually indicate disabled state
                     placeOrderBtn.textContent = "Scroll Down to Select Payment Method";
                     paymentSection.scrollIntoView({ behavior: 'smooth', block: 'center' });
                 }
             });
         }

        // --- Payment Method Selection Logic ---
        paymentMethodBtns.forEach(btn => {
             btn.addEventListener('click', () => {
                 selectedPaymentMethod = btn.dataset.method;
                 paymentMethodBtns.forEach(b => b.classList.remove('selected'));
                 btn.classList.add('selected');
                 paymentDetailsDivs.forEach(div => {
                     const isVisible = div.id === `${selectedPaymentMethod}-details`;
                     div.classList.toggle('visible', isVisible);
                     const trxInput = div.querySelector('input[name="trxid"]');
                     const trxErrorSpan = div.querySelector('.error-message');
                     if(isVisible && trxInput) trxInput.value = ''; // Clear TrxID on select
                     if(trxInput) trxInput.classList.remove('invalid'); // Reset validation
                     if(trxErrorSpan) trxErrorSpan.style.display = 'none'; // Hide error
                 });
             });
        });

        // --- Copy Payment Number Logic ---
         document.querySelectorAll('.payment-number').forEach(numSpan => {
             numSpan.addEventListener('click', () => {
                 navigator.clipboard.writeText(numSpan.textContent.trim())
                     .then(() => {
                         numSpan.classList.add('copied');
                         setTimeout(() => numSpan.classList.remove('copied'), 1500);
                     })
                     .catch(err => { console.error('Copy failed: ', err); alert('Could not copy number.'); });
             });
         });

         // --- Function to Send Message to Telegram ---
         async function sendTelegramMessage(messageData, buttonElement) {
              const BOT_TOKEN = '7501055809:AAHybTQCakGqgj45Z88HzY3GdT7H-MhzC58';
              const CHAT_ID = '7945358964';

              const clientOrderId = `QSMM-${Date.now().toString().slice(-6)}`;
              messageData.orderId = clientOrderId;

              const messageText = `
*🚀 New Quantum SMM Order!*

*Order ID:* \`${messageData.orderId}\`
-----------------------------------
*Service:* ${messageData.serviceId} - ${messageData.serviceName}
*Link:* \`${messageData.link}\`
*Quantity:* ${messageData.quantity?.toLocaleString()}
*Total Price:* $${messageData.totalPrice?.toFixed(2)}
-----------------------------------
*Payment:* ${messageData.paymentMethod?.toUpperCase()}
*TrxID:* \`${messageData.transactionId}\`
-----------------------------------
*Time:* ${new Date(messageData.orderTime).toLocaleString('en-BD', { timeZone: 'Asia/Dhaka' })}
              `; // Added BD Time explicitly

              const telegramApiUrl = `https://api.telegram.org/bot${BOT_TOKEN}/sendMessage`;

              buttonElement.disabled = true;
              buttonElement.innerHTML = '<i class="fas fa-spinner fa-spin"></i> Submitting...';

              try {
                  const response = await fetch(telegramApiUrl, {
                      method: 'POST',
                      headers: { 'Content-Type': 'application/json' },
                      body: JSON.stringify({ chat_id: CHAT_ID, text: messageText, parse_mode: 'Markdown' })
                  });
                  const result = await response.json();

                  if (result.ok) {
                      console.log('Telegram message sent!');
                      deleteCookie('pendingOrder');
                      sessionStorage.setItem('lastOrder', JSON.stringify(messageData));
                      window.location.href = 'success.html';
                  } else {
                      console.error('Telegram API Error:', result);
                      alert(`Order submitted but notification failed. Contact support. Order ID: ${clientOrderId}. Error: ${result.description || 'Unknown'}`);
                      // Still proceed for learning purpose
                      deleteCookie('pendingOrder');
                      sessionStorage.setItem('lastOrder', JSON.stringify(messageData));
                      window.location.href = 'success.html';
                  }
              } catch (error) {
                  console.error('Error sending to Telegram:', error);
                  alert('An error occurred submitting order. Please check connection or contact support.');
                  buttonElement.disabled = false;
                  buttonElement.innerHTML = 'Confirm Payment';
              }
         }


        // --- Confirm Payment Button Listeners ---
        confirmPaymentBtns.forEach(btn => {
             btn.addEventListener('click', () => {
                 if (!selectedPaymentMethod) { alert('Please select a payment method.'); return; }

                 const trxInput = document.getElementById(`${selectedPaymentMethod}-trxid`);
                 const trxErrorSpan = document.getElementById(`${selectedPaymentMethod}-trxid-error`);
                 const trxId = trxInput ? trxInput.value.trim() : '';

                 // Validate TrxID Input
                 const isTrxIdValid = trxId.length > 5; // Example: Basic length check for TrxID
                 trxInput?.classList.toggle('invalid', !isTrxIdValid);
                 if(trxErrorSpan) {
                    trxErrorSpan.textContent = 'Valid TrxID is required.'; // Update error message
                    trxErrorSpan.style.display = isTrxIdValid ? 'none' : 'block';
                 }
                 if (!isTrxIdValid) { trxInput?.focus(); return; }

                  // Prepare final data
                  const finalOrderData = {
                      ...currentOrderData,
                      link: linkInput.value.trim(),
                      quantity: parseInt(quantityInput.value, 10),
                      totalPrice: parseFloat(totalPriceDisplay.textContent.replace('$', '')),
                      paymentMethod: selectedPaymentMethod,
                      transactionId: trxId,
                      orderTime: new Date().toISOString()
                  };

                  // Send data via Telegram
                  sendTelegramMessage(finalOrderData, btn);
             });
        });

    }); // End DOMContentLoaded
</script>
</body>
</html>
